<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright Â© 2010 Curam Software Ltd.
All rights reserved.

This software is the confidential and proprietary information of Curam
Software, Ltd. ("Confidential Information"). You shall not disclose
such Confidential Information and shall use it only in accordance with the
terms of the license agreement you entered into with Curam Software.
-->
<!--

  This is the ant utilities file for Reporting project.
  It contains any configuration test tasks used by the reporting build.

-->
<project
  default="encrypt.password"
  name="rep_encrypt"
>


  <!--  ***************************  -->
  <!--  ***  Import Properties  ***  -->
  <!--  ***************************  -->

  <target name="encrypt.validate">
    <!-- Check to see if the password to be encrypted is set -->
    <condition property="encrypt.password.isvalid">
      <isset property="password"/>
    </condition>
    <antcall target="check.password.isvalid"/>
  </target>


  <!-- Fail if password property is missing. -->
  <target
    name="check.password.isvalid"
    unless="encrypt.password.isvalid"
  >
    <fail message="Please set password property -Dpassword="/>
  </target>


  <target
    depends="encrypt.validate"
    description="Encrypts a given password, -Dpassword="
    name="encrypt.password"
  >

    <taskdef
      classname="curam.util.reporting.internal.tasks.AntEncrypt"
      classpath="${jar.reporting.buildenv}"
      name="EncryptPassword"
    />


    <EncryptPassword password="${password}"/>
  </target>


  <target name="decrypt.password">


    <taskdef
      classname="curam.util.reporting.internal.tasks.AntEncrypt"
      classpath="${jar.reporting.buildenv}"
      name="EncryptPassword"
    />
    <EncryptPassword
      password="${password}"
      to="decrypted.db.password"
    />


  </target>


</project>
