<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><!-- Copyright 2006 Curam Software Ltd. --><html lang="en"><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Structuring a Book</title><link href="help-style.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.64.1" name="generator"><link rel="home" href="book-index.html" title="C&uacute;ram DocMaker Internals"><link rel="up" href="DMN13005.html" title="Converting FrameMaker Documents"><link rel="previous" href="DMN1330B.html" title="Preparing a Book"><link rel="next" href="DMN13734.html" title="Converting to XML"><script src="help-util.js" type="text/javascript"></script></head><body onload="pageOpened();" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation"><tr><td class="navbarright"><span class="navprev"><a accesskey="p" href="DMN1330B.html"><img class="navigation" src="../images/prev.gif" alt="Previous Page" title="Previous Page"></a></span> <span class="navnext"><a accesskey="n" href="DMN13734.html"><img class="navigation" src="../images/next.gif" alt="Next Page" title="Next Page"></a></span></td></tr></table></div><div id="spacer"></div><div class="content"><div class="section" lang="en"><div class="section_titlepage"><div><div><h2 class="title"><a name="DMN13594"></a>Structuring a Book</h2></div></div><div></div></div><p>
      The next step is to convert the files in your book into
      <span class="emphasis"><em>structured</em></span>
      <span class="application">FrameMaker</span>
      documents.
    </p><p>
      A <span class="emphasis"><em>conversion table</em></span> document supplied
      with DocMaker instructs <span class="application">FrameMaker</span> to
      automatically identify typical sequences of paragraph and character
      formats and mark them up as document elements. For example, a
      &ldquo;<span class="quote">BulletedList</span>&rdquo; paragraph optionally followed by some
      &ldquo;<span class="quote">Indent</span>&rdquo; paragraphs are identified as DocBook
      <tt class="sgmltag-element">para</tt> elements within a single
      <tt class="sgmltag-element">listitem</tt> element. Consecutive occurrences
      of this pattern are identified as an <tt class="sgmltag-element">itemizedlist</tt>
      element. Because the conversion process depends on the identification
      of these patterns, it is vital that the standard patterns are
      respected when preparing the document.
    </p><p>
      Structuring the document can be an iterative process: if the
      structure is not identified correctly, you will have to fix your
      document and try again. Here are the steps that you must follow:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Using your file manager, go to the folder containing the
          <tt class="filename">fminput</tt> folder and create a new sub-folder
          named <tt class="filename">fmoutput</tt>. This will be used to contain
          the newly created structured <span class="application">FrameMaker</span>
          document files.
        </p></li><li><p>
          In <span class="application">FrameMaker</span>, close all open documents
          and then open the file named <tt class="filename">fm2fmdb_ct.fm</tt>
          located in the <tt class="filename">lib</tt> folder of your DocMaker
          installation folder.
        </p></li><li><p>
          Open the main <tt class="filename">.book</tt> file for your document
          (from the <tt class="filename">fminput</tt> folder) and select
          <span class="guimenu">File</span>&rarr;<span class="guisubmenu">Utilities</span>&rarr;<span class="guimenuitem">Structure Current Book...</span> from the main menu.
        </p></li><li><p>
          In the dialog box, select <tt class="filename">fm2fmdb_ct.fm</tt> from
          the <span class="guilabel">Conversion Table Document</span> list.
          Set the <span class="guilabel">Output Directory</span> field to the
          <tt class="filename">fmoutput</tt> folder you created in the first
          step and check the
          <span class="guibutton">Allow Existing Files to Be Overwritten</span>
          check-box. Press the <span class="guibutton">Add Structure</span> button
          to create the newly structured document files. Each file in the
          book will be automatically opened, structured, and then saved.
          The newly structured book file will be opened for you.
        </p></li><li><p>
          To check that the structuring process was successful, you must
          open each structured document file that was created in the
          <tt class="filename">fmoutput</tt> folder and examine it using the
          <span class="emphasis"><em>Structure View</em></span> (you can access them via the
          book file that should be open). Some of the visual formatting
          of the content will be lost, but this is not important, only the
          structure is important now. Only the files containing chapters and
          appendices need to be checked. Backup files can be ignored.
        </p><p>
          Open each file and click on the <span class="guibutton">Structure View</span>
          button above the right-hand scroll bar. If the root element of the
          structure view is <tt class="sgmltag-element">NoName</tt>, the structuring has
          failed. Locate the point of failure in the document and determine
          the cause. It is most likely because the paragraph formats were used
          incorrectly. If you need to fix the formatting, open the
          <span class="emphasis"><em>original</em></span> file, make your changes, save it,
          and then start the structuring process again.
        </p></li><li><p>
          Apart from the <tt class="sgmltag-element">NoName</tt> root element problem, there
          may be other, less critical, structural errors. You must locate
          these and fix them in the original document before running the
          conversion process again. Here are some of the errors:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              The structure view will highlight elements (created from
              paragraph and character formats) that contain manual formatting
              overrides by adding an
              <tt class="sgmltag-attribute">override</tt> attribute with
              the value <tt class="sgmltag-attvalue">yes</tt>. If you
              have difficulty removing an override, select the text, reset
              the format to the default, and then apply the correct format.
            </p></li><li><p>
              Text that was formatted without applying any character format
              will be contained in an <tt class="sgmltag-element">ILLEGAL_FORMATTING</tt>
              element. In the original document, either remove the
              formatting, or apply the appropriate character format.
            </p></li><li><p>
              Cross-references that were inserted using a cross-reference
              format not in the standard template will be contained in an
              <tt class="sgmltag-element">ILLEGAL_CROSS_REF_FORMAT</tt> element. You should
              use one of the standard formats instead.
            </p></li><li><p>
              Some standard cross-reference formats are not supported. These
              are indicated by an
              <tt class="sgmltag-element">UNSUPPORTED_CROSS_REF_FORMAT</tt> element. Change
              these cross-references to use one of the supported formats.
            </p></li><li><p>
              Paragraph, character and table formats that are not in the
              standard template will be marked by an
              <tt class="sgmltag-element">ILLEGAL_PARAGRAPH_FORMAT</tt>,
              <tt class="sgmltag-element">ILLEGAL_TABLE_FORMAT</tt>, or
              <tt class="sgmltag-element">ILLEGAL_CHARACTER_FORMAT</tt> element
              respectively. Reformat these using one of the standard formats.
            </p></li><li><p>
              <span class="application">FrameMaker</span> uses various types of
              <span class="emphasis"><em>markers</em></span> to support cross-reference targets,
              hypertext links, conditional text, etc. Only the
              &ldquo;<span class="quote">Cross-Ref</span>&rdquo;, &ldquo;<span class="quote">TopicAlias</span>&rdquo;,
              &ldquo;<span class="quote">ImageAltText</span>&rdquo;, &ldquo;<span class="quote">ImageLongDescText</span>&rdquo;,
              and &ldquo;<span class="quote">TableSummary</span>&rdquo; markers are supported by
              DocMaker. All other markers are converted to an
              <tt class="sgmltag-element">UNSUPPORTED_MARKER_TYPE</tt> element. These do
              not have to be fixed, but warnings will be generated during 
              later processing.
            </p></li></ul></div><p>
          You can use the find tool in <span class="application">FrameMaker</span>
          to locate many of these problems by searching for elements by name.
          The element name need only be a part of the full element name,
          so searching for &ldquo;<span class="quote">ILLEGAL</span>&rdquo; will find all of the
          elements whose names contain that phrase.
        </p></li><li><p>
          With the structured <tt class="filename">.book</tt> file open,
          right-click on each file containing a chapter or appendix, select
          <span class="guimenuitem">Numbering...</span> from the pop-up menu and
          set the numbering as follows:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              The file containing the first chapter should be set to restart
              all chapter and paragraph numbering from &ldquo;<span class="quote">1</span>&rdquo; and
              use a numeric format.
            </p></li><li><p>
              Subsequent chapter files should be set to continue
              all chapter and paragraph numbering from the previous file.
              You can set all these files simultaneously by selecting them
              all in the book's file list before opening the numbering
              dialog box.
            </p></li><li><p>
              The file containing the first appendix should be set,
              like the first chapter, to restart chapter and paragraph
              numbering from &ldquo;<span class="quote">1</span>&rdquo; and use a numeric format.
              Note that appendices normally use an alphabetic format, but
              this must be changed to numeric to allow cross-reference
              resolution.
            </p></li><li><p>
              Subsequent appendix files should be set the same way as
              the subsequent chapter files. Again, a numeric, not alphabetic,
              format must be used.
            </p></li><li><p>
              The page numbering is not important and can be left as is.
            </p></li></ul></div><p>
          The exact settings are dependent on the way your book is
          structured, so more details cannot be provided here. The numbering
          is important later when DocMaker must resolve cross-references
          made across file boundaries.
        </p></li><li><p>
          Now, to prevent <span class="application">FrameMaker</span> from
          messing up the cross-references, rename the
          <tt class="filename">fminput</tt> folder (the folder containing the
          working copy of your unstructured book) to
          <tt class="filename">fminput.hide</tt>. This will prevent
          cross-references in the new structured documents from referring
          to the unstructured documents from which they were created. If
          you have any files in the <tt class="filename">fminput</tt> folder
          open in <span class="application">FrameMaker</span>, you should close
          them before renaming the folder. If you experience problems
          trying to the rename the folder, you may have to exit from
          <span class="application">FrameMaker</span> and try again.
        </p></li><li><p>
          Select
          <span class="guimenu">Edit</span>&rarr;<span class="guimenuitem">Update Book...</span> from the main menu and click the
          <span class="guibutton">Update</span> button in the dialog box. Save the
          book when the update process has completed.
        </p></li></ol></div><p>
      When you have identified and fixed all of the problems, and
      restructured the documents, you can proceed to the next step:
      converting the files to <span class="acronym">XML</span>. If you have
      missed any formatting errors, they will be caught later by
      DocMaker and you will have to fix the files and reprocess them.
    </p><div class="note"><table border="0" summary="Note"><tr><td valign="top" align="center" rowspan="2" width="25"><img alt="[Note]" src="../images/note.gif"></td><th align="left">Note</th></tr><tr><td valign="top" align="left" colspan="2"><p>
        If you need to re-run the structuring process, you should rename
        <tt class="filename">fminput.hide</tt> back to <tt class="filename">fminput</tt>
        first. Then, before updating the newly structured book, you should
        rename <tt class="filename">fminput</tt> to
        <tt class="filename">fminput.hide</tt>. This procedure is a little
        awkward, but if you do not do it, the cross-references will
        most likely be wrong but DocMaker will not be able to correct them.
      </p></td></tr></table></div></div></div><div class="footer"><p class="copyright">Licensed Materials - Property of IBM Corp, IBM Corporation and other(s) 1999,2012. IBM is a registered trademark of IBM Corporation, in the United States, other countries or both.</p></div><div class="navfooter"><table summary="Navigation"><tr><td class="navbarright"><span class="navprev"><a accesskey="p" href="DMN1330B.html"><img class="navigation" src="../images/prev.gif" alt="Previous Page" title="Previous Page"></a></span> <span class="navnext"><a accesskey="n" href="DMN13734.html"><img class="navigation" src="../images/next.gif" alt="Next Page" title="Next Page"></a></span></td></tr></table></div></body></html>