<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><!-- Copyright 2006 Curam Software Ltd. --><html lang="en"><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Preparing a Book</title><link href="help-style.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.64.1" name="generator"><link rel="home" href="book-index.html" title="C&uacute;ram DocMaker Internals"><link rel="up" href="DMN13005.html" title="Converting FrameMaker Documents"><link rel="previous" href="DMN130CD.html" title="Conversion Issues"><link rel="next" href="DMN13594.html" title="Structuring a Book"><script src="help-util.js" type="text/javascript"></script></head><body onload="pageOpened();" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation"><tr><td class="navbarright"><span class="navprev"><a accesskey="p" href="DMN130CD.html"><img class="navigation" src="../images/prev.gif" alt="Previous Page" title="Previous Page"></a></span> <span class="navnext"><a accesskey="n" href="DMN13594.html"><img class="navigation" src="../images/next.gif" alt="Next Page" title="Next Page"></a></span></td></tr></table></div><div id="spacer"></div><div class="content"><div class="section" lang="en"><div class="section_titlepage"><div><div><h2 class="title"><a name="DMN1330B"></a>Preparing a Book</h2></div></div><div></div></div><div class="tip"><table border="0" summary="Tip: 
        FrameMaker's Find Tool"><tr><td valign="top" align="center" rowspan="2" width="25"><img alt="[Tip]" src="../images/tip.gif"></td><th align="left"><a name="DMN13310"></a>
        FrameMaker's Find Tool</th></tr><tr><td valign="top" align="left" colspan="2"><p>
        <span class="application">FrameMaker</span> allows more than just text
        to be located with its find tool. You can also search for
        cross-references by format name, any cross-reference regardless of
        format, unresolved cross-references, paragraph and character tags,
        anchored frames (figures), character formatting, etc. This can be
        very useful when preparing a document. The preparation is the
        most painful part of this process, so learning this shortcut can
        save you many hours of drudgery!
      </p><p>
        You can, for example, find cross-references and then change the format
        of those that refer to sections in other files. Also, you can search
        for characters with a particular format, say in &ldquo;<span class="quote">Times New
        Roman Italic</span>&rdquo; font and check that the &ldquo;<span class="quote">Emphasis</span>&rdquo;
        character format was used.
      </p><p>
        You can find out more about these features in the online help.
        See the &ldquo;<span class="quote">Searching for any item</span>&rdquo; topic in the
        &ldquo;<span class="quote">Word Processing</span>&rdquo; section accessible from the contents
        page.
      </p></td></tr></table></div><p>
      The first step in the conversion process is preparation. Your
      <span class="application">FrameMaker</span> documents need to be modified
      and corrected before the conversion process will work. Follow these
      steps:
    </p><div class="orderedlist"><ol type="1"><li><p>
          For each file in the book containing a chapter or appendix, fix
          any erroneous chapter cross-reference markers by following these
          steps:
        </p><div class="orderedlist"><ol type="a"><li><p>
              Open the file in <span class="application">FrameMaker</span>.
            </p></li><li><p>
              Select
              <span class="guimenu">View</span>&rarr;<span class="guimenuitem">Text Symbols</span>
              from the menu to ensure that you can see the markers used
              for cross-references. (If this option is already enabled,
              you can skip this step.)
            </p></li><li><p>
              Select
              <span class="guimenu">View</span>&rarr;<span class="guimenuitem">Master Pages</span>
              from the menu to access the master page used by the document.
            </p></li><li><p>
              If the master page contains a paragraph using the
              &ldquo;<span class="quote">ChapterNumber</span>&rdquo; format, or the
              &ldquo;<span class="quote">Appendix Number</span>&rdquo; format if this is an
              appendix, look for a symbol that looks a &ldquo;<span class="quote">T</span>&rdquo;
              at the end of the paragraph. If one is present, select it
              and cut it to the clipboard. This can be trickier than it
              sounds if you try to use the mouse. The easiest way to do
              this is to place the cursor at the end of the paragraph
              using the <span class="keycap">End</span> key, hold down the
              <span class="keycap">Shift</span> key and press the
              <span class="keycap">Left Arrow</span> key once to select the marker,
              then press
              <span class="keycap">Ctrl</span>-<span class="keycap">X</span>
              to cut it.
            </p></li><li><p>
              Select 
              <span class="guimenu">View</span>&rarr;<span class="guimenuitem">Body Pages</span>
              from the menu to return to the document text. Paste the
              cross-reference marker back at the end of the
              &ldquo;<span class="quote">ChapterNumber</span>&rdquo; or &ldquo;<span class="quote">Appendix Number</span>&rdquo;
              paragraph (but only if one is not already there). Doing this
              will prevent unresolved cross-references, but if there are
              two markers, they are unavoidable. Save the file and close it.
            </p></li></ol></div><p>
          When you have completed these modifications, update the
          book and fix any broken chapter cross-references that are
          reported.
        </p><p>
          You should also ensure that only the supported cross-reference
          formats are used in your document. You can import the supported
          formats from the conversion template described below. If you want
          to commit your changes back to CVS before beginning the
          &ldquo;<span class="quote">destructive</span>&rdquo; phase of the conversion process,
          however, be sure to import only the cross-reference formats, and
          not any of the other formatting components (just turn-off most of
          the check-boxes in the dialog box).
        </p></li><li><p>
          Remove all blank lines (other than in sample program listings)
          and page breaks from the text. These can be found more easily
          if text symbols are made visible. The use of blank lines for
          vertical spacing is redundant as such spacing is achieved by
          correctly using the paragraph formats. If it looks wrong, do
          not worry, DocBook is not about the <span class="emphasis"><em>look</em></span>,
          it is about the <span class="emphasis"><em>content</em></span>; formatting
          appropriate to the content will be applied by DocMaker during
          rendering and not by the author. Unless the blank line is
          meaningful content (as it may be in a program listing), it
          should be removed from the document.
        </p></li><li><p>
          Reformat sample program listings so that only space characters
          are used for indentation, not tab characters. It may also be
          necessary to shorten lines in program listings, but this can be
          left until later when DocMaker performs its rule-checking.
        </p><p>
          It is also likely that program listings are not using the correct
          formatting if the code was copied and pasted from another
          application. Syntax-highlighting is a typical symptom. Check that
          all lines in the listing use the &ldquo;<span class="quote">ListingBody</span>&rdquo;
          paragraph format.
        </p></li><li><p>
          Many formatting overrides (changes made to text after applying
          the template's paragraph and character formats) can be fixed by
          re-applying the formats <span class="foreignphrase"><i class="foreignphrase">en masse</i></span>
          for a particular file as follows:
        </p><div class="orderedlist"><ol type="a"><li><p>
              With the document file open, select
              <span class="guimenu">File</span>&rarr;<span class="guisubmenu">Import</span>&rarr;<span class="guimenuitem">Formats...</span>
              from the main menu.
            </p></li><li><p>
              In the dialog box, select <span class="guilabel">Current</span>
              from the list of documents in the
              <span class="guilabel">Import from Document</span> list.
            </p></li><li><p>
              Check <span class="emphasis"><em>all</em></span> the check-boxes in both the
              <span class="guilabel">Import and Update</span> and
              <span class="guilabel">While Updating, Remove</span> sections and
              press the <span class="guibutton">Import</span> button.
              <span class="application">FrameMaker</span> will now re-apply the
              formats in the document's own template to the tagged paragraphs
              and characters.
            </p></li></ol></div></li><li><p>
          Check that the appropriate paragraph formats have been applied
          to the paragraphs in the document. For example, indented
          paragraphs should have used the &ldquo;<span class="quote">Indent</span>&rdquo; or
          &ldquo;<span class="quote">IndentDouble</span>&rdquo; format, and not the
          &ldquo;<span class="quote">Body</span>&rdquo; format with a manually-applied indentation.
        </p></li><li><p>
          Check that character formats are correct. Text that appears in
          any font other than the default paragraph font for the paragraph
          that contains it, should use one of the defined character formats
          and not use a manually-applied format override.
        </p></li><li><p>
          Frequently, figures are not correctly inserted into C&uacute;ram
          documents. Figures require the application of two paragraph
          formats to sequential paragraphs. The first paragraph should
          use the &ldquo;<span class="quote">Figure</span>&rdquo; format and contain an
          <span class="emphasis"><em>anchored frame</em></span> (with text symbols visible,
          you should see an upside-down &ldquo;<span class="quote">T</span>&rdquo; symbol indicating
          the presence of the <span class="emphasis"><em>anchor</em></span>). The second
          paragraph should contain the text of the figure title and use
          the &ldquo;<span class="quote">FigureTitle</span>&rdquo; format.
        </p><p>
          To correct any deviation from this prescribed format, follow
          these steps:
        </p><div class="orderedlist"><ol type="a"><li><p>
              If the anchor for the anchored frame is not in a paragraph
              of its own (it may be at the end of the previous paragraph),
              relocate it to an empty &ldquo;<span class="quote">Figure</span>&rdquo; paragraph
              immediately before the &ldquo;<span class="quote">FigureTitle</span>&rdquo; paragraph.
            </p></li><li><p>
              If the paragraph above the &ldquo;<span class="quote">FigureTitle</span>&rdquo;
              paragraph does not use the &ldquo;<span class="quote">Figure</span>&rdquo; format,
              change it. (Sometimes, it can be difficult to place the
              cursor within this paragraph due to the presence of the
              anchored frame. The easiest way to do it is to place the
              cursor on the &ldquo;<span class="quote">FigureTitle</span>&rdquo; paragraph and
              press the <span class="keycap">Up Arrow</span> key once.)
            </p></li><li><p>
              If the anchored frame was not configured correctly, the
              figure may be now be located in a seemingly arbitrary
              position on the page. You can correct this (though it is
              not required by the conversion process) if it makes it
              difficult to check the formatting of nearby paragraphs or
              figures: right-click on the anchored frame (you will need
              to do this on, or very near, the frame boundary to avoid
              selecting the enclosed figure) and select
              <span class="guimenuitem">Anchored Frame...</span> from the pop-up
              menu. In the dialog box, ensure that the
              <span class="guilabel">Anchoring Position</span> is set to
              &ldquo;<span class="quote">At Insertion Point</span>&rdquo; and that the
              <span class="guilabel">Distance above Baseline</span> is set to
              &ldquo;<span class="quote">0</span>&rdquo;. Click the <span class="guibutton">Edit Frame</span>
              button to confirm any changes.
            </p></li></ol></div></li></ol></div><p>
      Before completing the final preparation stages, you may want to
      save your document files and commit any changes to the
      <span class="acronym">SCM</span> system. Up to this point, your changes
      have improved the formatting of the document, after this point
      the changes may be destructive and it is unlikely that you will
      want to preserve them.
    </p><p>
      <span class="application">FrameMaker</span> can get confused about
      cross-references during the conversion process because the
      <tt class="filename">.book</tt> files store the full path to the
      <tt class="filename">.fm</tt> files. This means that when a book is
      structured and a new book file is created, the cross-reference
      that refer to other files still refer to the old, unstructured
      file in the original location. However, if the referenced
      file does not exist, then <span class="application">FrameMaker</span>
      looks in the same folder as the <tt class="filename">.book</tt> file
      for the <tt class="filename">.fm</tt> file and correctly resolves the
      reference. Therefore, the conversion process requires that the
      original files be moved around to &ldquo;<span class="quote">trick</span>&rdquo;
      <span class="application">FrameMaker</span> into correctly handling
      cross-references. This explains why you will begin to feel
      like you are playing musical chairs with the folder structure!
    </p><p>
      If you are lucky (or unusually diligent), you will have found
      and corrected all of the manual overrides in the document. The next
      steps will remove further overrides and prepare the document
      for conversion by changing the document template. Any information
      about the document content conveyed by overrides to the defined
      paragraph and character formats, will be lost. For example, if
      the importance of some content was implied by overriding the font
      of a &ldquo;<span class="quote">Body</span>&rdquo; paragraph to italic, this override will
      be discarded. Character overrides independent of a text set to
      a character format, will still be preserved for now.
    </p><div class="orderedlist"><ol type="1"><li><p>
          Close all documents in <span class="application">FrameMaker</span>.
        </p></li><li><p>
          You must now create a working folder to hold your original book's
          files. Using your file manager, go to the folder containing your
          book's files and create a new sub-folder named
          <tt class="filename">fminput</tt>. <span class="emphasis"><em>Move</em></span> (do not
          copy) all of your book's files (the <tt class="filename">.book</tt>
          file and all the <tt class="filename">.fm</tt> files) to this folder.
        </p></li><li><p>
          In <span class="application">FrameMaker</span>, open the file
          named <tt class="filename">fm2fmdb_template.fm</tt> located in
          the <tt class="filename">lib</tt> folder of your DocMaker
          installation.
        </p></li><li><p>
          Open the <tt class="filename">.book</tt> file for your document (now
          in the <tt class="filename">fminput</tt> folder).
        </p></li><li><p>
          In the book window, select all of the files in your book that
          contain chapters or appendices (these are usually all of the files
          after the generated table of contents file).
        </p></li><li><p>
          Select
          <span class="guimenu">File</span>&rarr;<span class="guisubmenu">Import</span>&rarr;<span class="guimenuitem">Formats...</span>
          from the main menu.
        </p></li><li><p>
          In the dialog box, select
          <tt class="filename">fm2fmdb_template.fm</tt> from the list of
          files in the <span class="guilabel">Import from Document</span> list.
        </p></li><li><p>
          Check <span class="emphasis"><em>all</em></span> the check-boxes in both the
          <span class="guilabel">Import and Update</span> and
          <span class="guilabel">While Updating, Remove</span> sections and
          press the <span class="guibutton">Import</span> button.
          <span class="application">FrameMaker</span> will now apply the
          &ldquo;<span class="quote">C&uacute;ram DocBook Conversion Template</span>&rdquo; template to
          all of the files.
        </p></li><li><p>
          With the same files selected in the book, now select
          <span class="guimenu">File</span>&rarr;<span class="guisubmenu">Import</span>&rarr;<span class="guimenuitem">Element Definitions...</span>
          from the main menu.
        </p></li><li><p>
          In the dialog box, again select
          <tt class="filename">fm2fmdb_template.fm</tt> from the list of
          files in the <span class="guilabel">Import from Document</span> list and
          press the <span class="guibutton">Import</span> button. Element definitions
          will be imported. You can dismiss the log window.
        </p></li><li><p>
          If you had any document files open while the formats were
          applied, they will need to be saved. You can go to the book
          window, right-click on the selected book files, and choose
          <span class="guimenuitem">Save</span> from the pop-up menu. This
          will save the changes made to these files that you had open
          when you imported the new template. Files that were not open
          will have the changes written to them automatically.
        </p></li><li><p>
          With the book as the current document, from the main menu select
          <span class="guimenu">Edit</span>&rarr;<span class="guimenuitem">Update Book...</span> and click the <span class="guibutton">Update</span> button
          in the dialog box. When the update has completed, save the book.
        </p></li></ol></div><p>
      The preparation of your document is now complete. It may not yet
      be perfect, but the conversion process will detect any further
      problems and you can make the necessary changes to your document
      as needed.
    </p></div></div><div class="footer"><p class="copyright">Licensed Materials - Property of IBM Corp, IBM Corporation and other(s) 1999,2012. IBM is a registered trademark of IBM Corporation, in the United States, other countries or both.</p></div><div class="navfooter"><table summary="Navigation"><tr><td class="navbarright"><span class="navprev"><a accesskey="p" href="DMN130CD.html"><img class="navigation" src="../images/prev.gif" alt="Previous Page" title="Previous Page"></a></span> <span class="navnext"><a accesskey="n" href="DMN13594.html"><img class="navigation" src="../images/next.gif" alt="Next Page" title="Next Page"></a></span></td></tr></table></div></body></html>